
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<html><head>
  <title>Module: Amrita</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <link rel=StyleSheet href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript" language="JavaScript">
  <!--
  function popCode(url) {
    window.open(url, "Code", 
          "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  //-->
  </script>
</head>

<body bgcolor="white">

<table summary="Information on class" width="100%" border="0" cellspacing="0">
 <tr class="title-row">
 <td class="big-title-font">
   <sup><font color="aqua">Module</font></sup> Amrita
 </td>
 <td align="right">
   <table summary="layout" cellspacing="0" cellpadding="2">
     <tr valign="top">
      <td class="small-title-font">In:</td>
      <td class="small-title-font">
        <a href="../files/lib/amrita/xml_rb.html" class="aqua">
lib/amrita/xml.rb
         </a>
<br />
        <a href="../files/lib/amrita/template_rb.html" class="aqua">
lib/amrita/template.rb
         </a>
<br />
        <a href="../files/lib/amrita/tag_rb.html" class="aqua">
lib/amrita/tag.rb
         </a>
<br />
        <a href="../files/lib/amrita/parts_rb.html" class="aqua">
lib/amrita/parts.rb
         </a>
<br />
        <a href="../files/lib/amrita/parser_rb.html" class="aqua">
lib/amrita/parser.rb
         </a>
<br />
        <a href="../files/lib/amrita/node_expand_rb.html" class="aqua">
lib/amrita/node_expand.rb
         </a>
<br />
        <a href="../files/lib/amrita/node_rb.html" class="aqua">
lib/amrita/node.rb
         </a>
<br />
        <a href="../files/lib/amrita/merge_rb.html" class="aqua">
lib/amrita/merge.rb
         </a>
<br />
        <a href="../files/lib/amrita/handlers_rb.html" class="aqua">
lib/amrita/handlers.rb
         </a>
<br />
        <a href="../files/lib/amrita/format_rb.html" class="aqua">
lib/amrita/format.rb
         </a>
<br />
        <a href="../files/lib/amrita/compiler_rb.html" class="aqua">
lib/amrita/compiler.rb
         </a>
<br />
        <a href="../files/lib/amrita/ams_rb.html" class="aqua">
lib/amrita/ams.rb
         </a>
<br />
      </td>
     </tr>
   </table>
  </td>
  </tr>
</table>
  <!-- banner header -->





<table summary="Methods" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Methods</td></tr>
</table>
<div class="name-list">
<a href="#M000025">a</a>&nbsp; &nbsp;
<a href="#M000022">convert</a>&nbsp; &nbsp;
<a href="#M000021">convert</a>&nbsp; &nbsp;
<a href="#M000023">convert</a>&nbsp; &nbsp;
<a href="#M000020">convert</a>&nbsp; &nbsp;
<a href="#M000026">def_tag</a>&nbsp; &nbsp;
<a href="#M000027">def_tag2</a>&nbsp; &nbsp;
<a href="#M000024">e</a>&nbsp; &nbsp;
<a href="#M000028">format_inline</a>&nbsp; &nbsp;
<a href="#M000029">format_pretty</a>&nbsp; &nbsp;
<a href="#M000030">noescape</a>&nbsp; &nbsp;
<a href="#M000031">pre</a>&nbsp; &nbsp;
</div>


<table summary="List of classes" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Classes and Modules</td></tr>
</table>
<div class="classlist">
Module <a href="Amrita/CacheManager.html" class="link">Amrita::CacheManager</a><br />
Module <a href="Amrita/ExpandByMember.html" class="link">Amrita::ExpandByMember</a><br />
Module <a href="Amrita/Node.html" class="link">Amrita::Node</a><br />
Module <a href="Amrita/PartsTemplate.html" class="link">Amrita::PartsTemplate</a><br />
&nbsp;&nbsp;::Class <a href="Amrita/PartsTemplate/PartsTempleteExpander.html" class="link">Amrita::PartsTemplate::PartsTempleteExpander</a><br />
Module <a href="Amrita/Sanitizer.html" class="link">Amrita::Sanitizer</a><br />
Module <a href="Amrita/XMLParser.html" class="link">Amrita::XMLParser</a><br />
Class <a href="Amrita/AmsHandler.html" class="link">Amrita::AmsHandler</a><br />
Class <a href="Amrita/AmsTemplate.html" class="link">Amrita::AmsTemplate</a><br />
Class <a href="Amrita/AsIsFormatter.html" class="link">Amrita::AsIsFormatter</a><br />
Class <a href="Amrita/Attr.html" class="link">Amrita::Attr</a><br />
Class <a href="Amrita/AttrArray.html" class="link">Amrita::AttrArray</a><br />
Class <a href="Amrita/DummyCacheManager.html" class="link">Amrita::DummyCacheManager</a><br />
Class <a href="Amrita/Element.html" class="link">Amrita::Element</a><br />
Class <a href="Amrita/ExpandContext.html" class="link">Amrita::ExpandContext</a><br />
Class <a href="Amrita/Formatter.html" class="link">Amrita::Formatter</a><br />
Class <a href="Amrita/HtmlParseError.html" class="link">Amrita::HtmlParseError</a><br />
Class <a href="Amrita/HtmlParser.html" class="link">Amrita::HtmlParser</a><br />
Class <a href="Amrita/HtmlTagInfo.html" class="link">Amrita::HtmlTagInfo</a><br />
Class <a href="Amrita/Listener.html" class="link">Amrita::Listener</a><br />
Class <a href="Amrita/MergeTemplate.html" class="link">Amrita::MergeTemplate</a><br />
Class <a href="Amrita/ModelMisMatch.html" class="link">Amrita::ModelMisMatch</a><br />
Class <a href="Amrita/ModuleCache.html" class="link">Amrita::ModuleCache</a><br />
Class <a href="Amrita/NodeArray.html" class="link">Amrita::NodeArray</a><br />
Class <a href="Amrita/PreFormatter.html" class="link">Amrita::PreFormatter</a><br />
Class <a href="Amrita/PrettyPrintFormatter.html" class="link">Amrita::PrettyPrintFormatter</a><br />
Class <a href="Amrita/SanitizedString.html" class="link">Amrita::SanitizedString</a><br />
Class <a href="Amrita/SingleLineFormatter.html" class="link">Amrita::SingleLineFormatter</a><br />
Class <a href="Amrita/SourceCache.html" class="link">Amrita::SourceCache</a><br />
Class <a href="Amrita/Tag.html" class="link">Amrita::Tag</a><br />
Class <a href="Amrita/TagBlock.html" class="link">Amrita::TagBlock</a><br />
Class <a href="Amrita/TagDD.html" class="link">Amrita::TagDD</a><br />
Class <a href="Amrita/TagDT.html" class="link">Amrita::TagDT</a><br />
Class <a href="Amrita/TagEmpty.html" class="link">Amrita::TagEmpty</a><br />
Class <a href="Amrita/TagInfo.html" class="link">Amrita::TagInfo</a><br />
&nbsp;&nbsp;::Class <a href="Amrita/TagInfo/TagInfoItem.html" class="link">Amrita::TagInfo::TagInfoItem</a><br />
Class <a href="Amrita/TagInline.html" class="link">Amrita::TagInline</a><br />
Class <a href="Amrita/TagItem.html" class="link">Amrita::TagItem</a><br />
Class <a href="Amrita/TagList.html" class="link">Amrita::TagList</a><br />
Class <a href="Amrita/TagP.html" class="link">Amrita::TagP</a><br />
Class <a href="Amrita/TagPre.html" class="link">Amrita::TagPre</a><br />
Class <a href="Amrita/TagTableSection.html" class="link">Amrita::TagTableSection</a><br />
Class <a href="Amrita/Template.html" class="link">Amrita::Template</a><br />
Class <a href="Amrita/TemplateFile.html" class="link">Amrita::TemplateFile</a><br />
Class <a href="Amrita/TemplateFileWithCache.html" class="link">Amrita::TemplateFileWithCache</a><br />
Class <a href="Amrita/TemplateText.html" class="link">Amrita::TemplateText</a><br />

</div>


<table summary="Method list" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Public Class methods</td></tr>
</table>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000026"></a>
<b>def_tag</b>(tagname, *attrs_p)
</td></tr>
</table>
<pre class="source">
<span class="cmt"># File lib/amrita/node.rb, line 749</span>
    <span class="kw">def</span> klass::def_tag(tagname, *attrs_p)
      def_tag2(tagname, tagname, *attrs_p)
    <span class="kw">end</span>
</pre>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000027"></a>
<b>def_tag2</b>(methodname, tagname, *attrs_p)
</td></tr>
</table>
<pre class="source">
<span class="cmt"># File lib/amrita/node.rb, line 753</span>
    <span class="kw">def</span> klass::def_tag2(methodname, tagname, *attrs_p)
      methodname = methodname.id2name 
      tagname = tagname.id2name 
      attrs = attrs_p.collect { |a| a.id2name }

      <span class="kw">if</span> attrs.size &gt; 0
        param = attrs.collect { |a| &quot;#{a}=nil&quot; }.join(<span class="str">&quot;, &quot;</span>)
        param += <span class="str">&quot;,*args,&amp;block&quot;</span>
        method_body = &quot;  e(:#{tagname}, &quot;
        method_body += attrs.collect { |a| &quot;A(:#{a}, #{a})&quot;}.join(<span class="str">&quot;, &quot;</span>)
        method_body += <span class="str">&quot;, *args, &amp;block)&quot;</span>
      <span class="kw">else</span>
        param = <span class="str">&quot;*args, &amp;block&quot;</span>
        method_body = &quot;  e(:#{tagname}, *args, &amp;block) &quot;
      <span class="kw">end</span>
      a = &quot;def #{methodname}(#{param}) \n#{method_body}\nend\n&quot;
      <span class="cmt">#print a</span>
      eval a
    <span class="kw">end</span>
</pre>
<table summary="Method list" cellpadding="5" width="100%">
<tr><td class="tablesubtitle">Public Instance methods</td></tr>
</table>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000020"></a>
<b>convert</b>(s)
</td></tr>
</table>
<pre class="source">
<span class="cmt"># File lib/amrita/xml.rb, line 15</span>
      <span class="kw">def</span> convert(s)
        Uconv::u8toeuc(s)
      <span class="kw">end</span>
</pre>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000021"></a>
<b>convert</b>(s)
</td></tr>
</table>
<pre class="source">
<span class="cmt"># File lib/amrita/xml.rb, line 19</span>
      <span class="kw">def</span> convert(s)
        Uconv::u8tosjis(s)
      <span class="kw">end</span>
</pre>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000022"></a>
<b>convert</b>(s)
</td></tr>
</table>
<pre class="source">
<span class="cmt"># File lib/amrita/xml.rb, line 23</span>
      <span class="kw">def</span> convert(s)
        s
      <span class="kw">end</span>
</pre>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000023"></a>
<b>convert</b>(s)
</td></tr>
</table>
<pre class="source">
<span class="cmt"># File lib/amrita/xml.rb, line 28</span>
    <span class="kw">def</span> convert(s)
      s
    <span class="kw">end</span>
</pre>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000024"></a>
<b>e</b>(tagname, *attrs, &amp;block)
</td></tr>
</table>
<div class="description">
<dl>
<dt>e(:hr)</dt><dd>&lt;hr&gt;

</dd>
<dt>e(:img src=&quot;a.png&quot;)</dt><dd>&lt;img src=&quot;a.png&quot;&gt;

</dd>
<dt>e(:p) { &quot;text&quot; }</dt><dd>&lt;p&gt;text&lt;/p&gt;

</dd>
<dt>e(:span :class=&gt;&quot;fotter&quot;) { &quot;bye&quot; } </dt><dd>&lt;span class=&quot;fotter&quot;&gt;bye&lt;/span&gt;

</dd>
</dl>
</div>
<pre class="source">
<span class="cmt"># File lib/amrita/node.rb, line 698</span>
  <span class="kw">def</span> e(tagname, *attrs, &amp;block)
    Element.new(tagname, *attrs, &amp;block)
  <span class="kw">end</span>
</pre>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000025"></a>
<b>a</b>(*x, &amp;block)
</td></tr>
</table>
<div class="description">
<p>
generate AttrArray object
</p>
</div>
<pre class="source">
<span class="cmt"># File lib/amrita/node.rb, line 706</span>
  <span class="kw">def</span> a(*x, &amp;block)
    <span class="kw">case</span> x.size
    <span class="kw">when</span> 1
      x = x[0]
      <span class="kw">case</span> x
        <span class="kw">when</span> Hash
        <span class="kw">when</span> String,Symbol
        x = Attr.new(x)
        <span class="kw">when</span> Attr
        <span class="kw">else</span>
        raise(TypeError, &quot;Not Attr,String or Symbol: #{x}&quot;)
      <span class="kw">end</span>
      AttrArray.new(x, &amp;block)
    <span class="kw">when</span> 0
      AttrArray.new([], &amp;block)
    <span class="kw">else</span>
      a = (0...x.size/2).collect <span class="kw">do</span> |i|
        Attr.new(x[i*2], x[i*2+1])
      <span class="kw">end</span>
      AttrArray.new(a, &amp;block)
    <span class="kw">end</span>
  <span class="kw">end</span>
</pre>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000028"></a>
<b>format_inline</b>(data=true, &amp;block) {|| ...}
</td></tr>
</table>
<div class="description">
<p>
format a Node object given as <tt>block</tt> in single line format.
</p>
<p>
If <tt>data</tt> was given, <tt>expand</tt> will be called before
formatting
</p>
</div>
<pre class="source">
<span class="cmt"># File lib/amrita/format.rb, line 686</span>
  <span class="kw">def</span> format_inline(data=<span class="kw">true</span>, &amp;block)
    node = Node::to_node(<span class="kw">yield</span>)
    f = SingleLineFormatter.new
    f.format(node.expand1(data))
  <span class="kw">end</span>
</pre>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000029"></a>
<b>format_pretty</b>(data=true, &amp;block) {|| ...}
</td></tr>
</table>
<div class="description">
<p>
pretty print a Node object given as <tt>block</tt>
</p>
<p>
If <tt>data</tt> was given, <tt>expand</tt> will be called before
formatting
</p>
</div>
<pre class="source">
<span class="cmt"># File lib/amrita/format.rb, line 698</span>
  <span class="kw">def</span> format_pretty(data=<span class="kw">true</span>, &amp;block)
    node = Node::to_node(<span class="kw">yield</span>)
    f = PrettyPrintFormatter.new
    f.format(node.expand1(data))
  <span class="kw">end</span>
</pre>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000030"></a>
<b>noescape</b>(&amp;block)
</td></tr>
</table>
<div class="description">
<p>
Usually the &lt;&gt; character in text will be escaped.
</p>
<pre>
    tmpl = TemplateText.new &quot;&lt;p id=x&gt;&lt;/p&gt;&quot;
    tmpl.expand(STDOUT, {:x =&gt; &quot;&lt;tag&gt;&quot;}) # =&gt; &lt;p&gt;&amp;lt;tag&amp;gt;&lt;/p&gt;
</pre>
<p>
If the text was wrapped by this method, it will no be escaped.
</p>
<pre>
    tmpl.expand(STDOUT, {:x =&gt; noescape {&quot;&lt;tag&gt;&quot;}}) # =&gt;  &lt;p&gt;&lt;tag&gt;&lt;/p&gt;
</pre>
</div>
<pre class="source">
<span class="cmt"># File lib/amrita/format.rb, line 715</span>
  <span class="kw">def</span> noescape(&amp;block) 
    Escape.new(<span class="kw">false</span>, &amp;block)
  <span class="kw">end</span>
</pre>
<table summary="method"  width="100%" cellspacing="0" cellpadding="5" border="0">
<tr><td class="methodtitle">
<a name="M000031"></a>
<b>pre</b>(*attrs, &amp;block)
</td></tr>
</table>
<div class="description">
<p>
If the text was wrapped by this method, spaces in it will be keeped.
</p>
</div>
<pre class="source">
<span class="cmt"># File lib/amrita/format.rb, line 722</span>
  <span class="kw">def</span> pre(*attrs, &amp;block) 
    Element.new(:pre, *attrs) { CompactSpace.new(<span class="kw">false</span>, &amp;block) }
  <span class="kw">end</span>
</pre>

</body>